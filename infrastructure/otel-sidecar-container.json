{
  "name": "otel-collector",
  "image": "public.ecr.aws/aws-observability/aws-otel-collector:latest",
  "essential": false,
  "command": ["--config=/etc/otel-config.yaml"],
  "cpu": 256,
  "memory": 512,
  "portMappings": [
    {
      "containerPort": 4317,
      "protocol": "tcp",
      "name": "otlp-grpc"
    },
    {
      "containerPort": 4318,
      "protocol": "tcp",
      "name": "otlp-http"
    }
  ],
  "environment": [
    {
      "name": "ENVIRONMENT",
      "value": "production"
    },
    {
      "name": "AWS_REGION",
      "value": "ap-southeast-2"
    }
  ],
  "secrets": [],
  "logConfiguration": {
    "logDriver": "awslogs",
    "options": {
      "awslogs-group": "/ecs/qivr-otel-collector",
      "awslogs-region": "ap-southeast-2",
      "awslogs-stream-prefix": "otel",
      "awslogs-create-group": "true"
    }
  },
  "healthCheck": {
    "command": ["CMD-SHELL", "curl -f http://localhost:13133/ || exit 1"],
    "interval": 30,
    "timeout": 5,
    "retries": 3,
    "startPeriod": 10
  }
}
